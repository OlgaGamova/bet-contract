RecurringCurrencyBet — это смарт-контракт, который позволяет двум участникам делать ставки на курс валюты (USD/EUR). Участники вносят ставки в ETH и указывают свой прогноз курса. Победителем становится тот, чей прогноз ближе к фактическому курсу, который предоставляется через надёжный оракул (например, Chainlink).

Контракт поддерживает многоразовое использование: новые раунды ставок могут начинаться каждый день. Каждый раунд имеет своё время окончания и расчёта, что гарантирует независимость и справедливость.

Основные возможности
Размещение ставок:

Участники делают ставки в ETH и указывают свой прогноз курса.
Ставка второго участника должна соответствовать сумме ставки первого.

Управление дедлайнами:

Ставки принимаются до конца текущего дня по UTC.
Результаты вычисляются в 9 утра следующего дня по UTC, используя курс от оракула.

Определение победителя:

Побеждает участник, чей прогноз ближе к фактическому курсу.
В случае ничьей оба участника получают возврат своих ставок (за вычетом комиссии за газ).

Автоматический сброс данных:

Если ставки сделаны после завершения предыдущего раунда, данные предыдущих ставок автоматически очищаются.

Механизм возврата:

Если второй участник не делает ставку до дедлайна, первый участник получает возврат своей ставки (за вычетом газа).
Интеграция с оракулом:

Контракт использует данные от надёжного оракула, такого как Chainlink, для получения актуального курса валют.

Как работает

Инициализация:

Контракт разворачивается с адресом оракула (например, Chainlink) в качестве параметра.

Размещение ставок:

Первый участник вызывает метод placeBet с суммой ставки и прогнозом курса.
Второй участник также вызывает placeBet, внося ту же сумму ставки и свой прогноз.

Обработка дедлайнов:

Если дедлайн истёк, а ставки не были завершены, первый участник получает возврат.

Расчёт результата:

После наступления времени результата (9:00 UTC следующего дня) любой из участников может вызвать метод settleBet.
Контракт получает фактический курс от оракула и определяет победителя.

Выплата выигрыша:

Победитель получает весь банк (ETH обоих участников).
В случае ничьей оба участника получают возврат ставок (за вычетом газа).
